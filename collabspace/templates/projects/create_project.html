{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="max-w-3xl mx-auto px-2 md:px-6 py-10">
  <div class="glass-panel p-6 md:p-8 space-y-6">
    <div class="space-y-2">
      <h1 class="text-3xl font-semibold text-ink">Создать проект</h1>
      <p class="text-sm text-inkMuted">Заполните информацию о вашем проекте</p>
    </div>

    {% if messages %}
      <div class="space-y-2" style="display: none;">
        {% for message in messages %}
          <div data-django-message="{{ message.tags|default:'info' }}">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}

    {% if form.errors %}
      <div class="glass-panel p-4 border border-danger/70 text-sm text-danger space-y-2">
        <div class="font-semibold">Проверьте поля формы:</div>
        <ul class="list-disc list-inside space-y-1">
          {% for field in form %}
            {% for error in field.errors %}
              <li><span class="font-semibold">{{ field.label }}:</span> {{ error }}</li>
            {% endfor %}
          {% endfor %}
          {% for error in form.non_field_errors %}
            <li>{{ error }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    <form method="post" enctype="multipart/form-data" class="space-y-6">
      {% csrf_token %}
      
      <div class="space-y-2">
        <label for="{{ form.title.id_for_label }}" class="text-sm font-semibold text-ink">
          {{ form.title.label }} *
        </label>
        {{ form.title }}
        {% if form.title.help_text %}
          <p class="text-xs text-inkMuted">{{ form.title.help_text }}</p>
        {% endif %}
      </div>

      <div class="space-y-2">
        <label for="{{ form.description.id_for_label }}" class="text-sm font-semibold text-ink">
          {{ form.description.label }} *
        </label>
        {{ form.description }}
        {% if form.description.help_text %}
          <p class="text-xs text-inkMuted">{{ form.description.help_text }}</p>
        {% endif %}
      </div>

      <div class="space-y-2">
        <label for="{{ form.section.id_for_label }}" class="text-sm font-semibold text-ink">
          {{ form.section.label }} *
        </label>
        {{ form.section }}
        {% if form.section.help_text %}
          <p class="text-xs text-inkMuted">{{ form.section.help_text }}</p>
        {% endif %}
      </div>

      <div class="space-y-2">
        <label class="text-sm font-semibold text-ink">
          {{ form.tags.label }}
        </label>
        <div class="grid grid-cols-2 md:grid-cols-3 gap-3 p-4 rounded-btn bg-bgElevated border border-border">
          {% for checkbox in form.tags %}
            <div class="flex items-center gap-2">
              {{ checkbox.tag }}
              <label for="{{ checkbox.id_for_label }}" class="text-sm text-ink cursor-pointer">
                {{ checkbox.choice_label }}
              </label>
            </div>
          {% endfor %}
        </div>
        {% if form.tags.help_text %}
          <p class="text-xs text-inkMuted">{{ form.tags.help_text }}</p>
        {% endif %}
      </div>

      <div class="space-y-2">
        <label for="{{ form.image_file.id_for_label }}" class="text-sm font-semibold text-ink">
          {{ form.image_file.label }}
        </label>
        {{ form.image_file }}
        {% if form.image_file.help_text %}
          <p class="text-xs text-inkMuted">{{ form.image_file.help_text }}</p>
        {% endif %}
      </div>

      <div class="flex gap-3 pt-4">
        <button type="submit" class="btn-primary px-6 py-3 font-semibold">
          Создать проект
        </button>
        <a href="{% url 'home' %}" class="btn-outline px-6 py-3 font-semibold">
          Отмена
        </a>
      </div>
    </form>
  </div>
</div>
{% endblock %}

